<!--
  ПИ18-2 Степанов И.
  Номер по списку: 23

  Разработать примеры использования JQuery, которые включали бы функции из разделов:

  1: attr()					  -   получение или изменение значения атрибута элемента
  2: css()                    -   редактирование стилей у элемента
  3: :password                -   селектор, применяется для выбора полей, использующихся для ввода пароля
  4: innerHeight()            -   получить внутреннюю высоту объекта
  5: wrapInner()              -   "Обертывает изнутри" выбранные элементы заданным wrappingElement, который может быть представлен в виде html, jQuery-объектом или DOM-объектом
  6: prev()                   -   jQuery метод .prev() позволяет получить каждый сестринский элемент, который находится предыдущим по отношению к текущему элементу в наборе соответствующих элементов.
  7: off()                    -   удаляет обработчик события, присоединенный методом on()
  8: toggle()                 -   скрывает или отображает выбранный объект
  9: focusin()                -   переданная этому методу в качестве параметра функция будет срабатывать каждый раз, как мы фокусируемся на элементе
  10: slideToggle()           -   позволяет плавно отобразить или скрыть выбранные элементы скользящим движением

  Ссылки:
  Мой хостинг:  https://stepigor.ru/university/webdev/t-3p2.html
  JSFiddle:     https://jsfiddle.net/stepigor/mk4hf0qw/
-->

<!--
  ПЕРВАЯ ЧАСТЬ РАБОТЫ (ПЕРЕДЕЛАТЬ t-2 С ИСПОЛЬЗОВАНИЕМ JQuery), ФАЙЛ t-3:

  Ссылки:
  Мой хостинг:  https://stepigor.ru/university/webdev/t-3.html
  JSFiddle:     https://jsfiddle.net/stepigor/hcbyo9f2/

-->

<!DOCTYPE html>
<html lang="ru" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>t-3 part 2</title>
</head>

<body style="background:lightgrey;text-align:center;">

	<!-- Поясняющая таблица с подписью -->
	<table id="task_table" style="margin:0 auto;font-size:18px;" border='3'>
		<tr>
			<td colspan='3'>
				<h3>ПИ18-2 Степанов И. - № по списку 23</h3>
				Некая симуляция системы логина (входа в систему). Реализованы все 10 пунктов задания. Далее следует пояснение выполнения - какие методы (или селекторы) использованы и как.
			</td>
		</tr>
		<tr>
			<td style="font-weight:bold;">Метод (селектор)</td>
			<td style="font-weight:bold;">Предназначение</td>
			<td style="font-weight:bold;">Использование</td>
		</tr>
		<tr>
			<td>attr()</td>
			<td>получение или изменение значения атрибута элемента</td>
			<td>Полю ввода пароля ставится атрибут disabled после успешного входа</td>
		</tr>
		<tr>
			<td>css()</td>
			<td>редактирование стилей у элемента</td>
			<td>Меняем цвет текста результата попытки входа (успех или провал, зеленый или красный)</td>
		</tr>
		<tr>
			<td>:password</td>
			<td>селектор, применяется для выбора полей, использующихся для ввода пароля</td>
			<td>С его помощью выбираю единственное поле ввода пароля, чтобы затем выставить ему атрибут disabled</td>
		</tr>
		<tr>
			<td>innerHeight()</td>
			<td>получить внутреннюю высоту объекта</td>
			<td>После успешного входа появляется фраза "А вы знали?", где указывается высота документа в пикселях.</td>
		</tr>
		<tr>
			<td>wrapInner()</td>
			<td>"Обертывает изнутри" выбранные элементы заданным wrappingElement, который может быть представлен в виде html, jQuery-объектом или DOM-объектом</td>
			<td>После успешного входа подсказка под полем ввода (как получить сведения о верном пароле) перечеркивается. Это достигается путем оборачивания элемента в тег strike (зачеркнутый текст)</td>
		</tr>
		<tr>
			<td>prev()</td>
			<td>jQuery метод .prev() позволяет получить каждый сестринский элемент, который находится предыдущим по отношению к текущему элементу в наборе соответствующих элементов.</td>
			<td>С его помощью пробегаю по всем квадратикам в нижнем блоке (количество попыток входа), чтобы окрасить каждый в нужный цвет (зеленый - успех, красный - провал).</td>
		</tr>
		<tr>
			<td>off()</td>
			<td>удаляет обработчик события, присоединенный методом on()</td>
			<td>Удаляю все обработчики у элемента кнопки "Войти" после ввода верного пароля.</td>
		</tr>
		<tr>
			<td>toggle()</td>
			<td>скрывает или отображает выбранный объект</td>
			<td>Прячу кнопку "Войти" после ввода правильного пароля</td>
		</tr>
		<tr>
			<td>focusin()</td>
			<td>переданная этому методу в качестве параметра функция будет срабатывать каждый раз, как мы фокусируемся на элементе</td>
			<td>При фокусировке на поле ввода пароля чуть выше открывается подсказка (скрыто -> 12345)</td></td>
		</tr>
		<tr>
			<td>slideToggle()</td>
			<td>позволяет плавно отобразить или скрыть выбранные элементы скользящим движением</td>
			<td>Показывает результат попытки входа (успех или провал)</td>
		</tr>
	</table>
	<span style="color:red;font-size:24px;cursor:pointer;" onclick="$('#task_table').toggle()"><u>Скрыть/показать таблицу (РЕКОМЕНДУЕТСЯ)</u></span>

	<!-- Заголовок с приглашением для пользователя -->
  <h1>Добро пожаловать!</h1>
  Войдите в систему

	<!-- блок с полем ввода пароля и кнопкой входа -->
  <div id="login_block" style="margin: 0 auto;border:3px solid blue;margin-top:75px;width:50%;text-align:center;background:white;">
    <br>
    Введите пароль доступа (верный - <b id="valid_password_hint">скрыт</b>):<br><br>
    <input type="password" id="user_password" value="" style="font-size:24px">
    <br><br>
    <button type="button" id="send_password" style="font-size:24px;">Войти</button><br><br>
	
	<div id="how_to_open_hint_tip" style="padding:15px;">
		Чтобы подсказка с правильным паролем открылась, сфокусируйтесь на поле ввода пароля.
	</div>
	<div id="did_you_know">
		
	</div>
	
  </div>
  
  <!-- здесь показывается результат попытки входа (успех или провал) -->
  <div id="login_result" style="display:none;margin: 0 auto;border:3px solid blue;margin-top:75px;width:50%;text-align:center;background:white;padding-top:35px;padding-bottom:35px;font-size:36px;">
    ???
  </div>
  
  <!-- блок с пустотой, служит для увеличения высоты документа -->
  <div style="height:250px;">
	
  </div>
  
  <!-- показывает результаты попыток в нижней части экрана -->
  <div style="position:fixed;bottom:5px;width:50%;height:64px;background:white;border:3px solid blue;left:25%;text-align:center;padding:5px;">
	<b>Количество попыток:</b>
	<!-- Сугубо для демонстрации работы метода prev() -->
	<div id="attempts_counter" style="margin-top:5px;">
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div style="width:32px;height:32px;background:grey;display:inline-block;"></div>
		<div id="start-point" style="width:32px;height:32px;background:grey;display:inline-block;"></div>
	</div>
  </div>

	<!-- сама библиотека -->
  <script src="https://difres.ru/js/jquery.js"></script>
  <script>
	//функция номер 9 - focusin()
	$('#user_password').focusin(function(){
		$('#valid_password_hint').html('12345'); //показываем подсказку пользователю при фокусировке на поле ввода пароля
	});
	$('#user_password').focusout(function(){
		$('#valid_password_hint').html('скрыт'); //прячем подсказку при расфокусировке
	});
	
	
	//проверка ввода пароля
	//используется функция slideToggle() под номером 10
	//используется функция toggle() под номером 8
	//используется функция off() под номером 7
	//используется функция prev() под номером 6
	//используется функция wrapInner() под номером 5
	//используется функция innerHeight() под номером 4
	//используется селектор :password под номером 3
	//используется функция css() под номером 2
	//используется метод attr() под номером 1
	var last_attempt = $('#start-point');	//текущий блок попыток, после ввода пароля окрасится в красный или зеленый (располагается в блоке, который находится в нижней части экрана - кол-во попыток)
	
	$('#send_password').bind('click', function(){	//пользователь "отправил" пароль на проверку (нажал на кнопку)
		if ($('#user_password').val() == '12345'){	//верный ли пароль?
			$('#login_result').css({'color':'green'});	//красим текст результата в зеленый (успех же!)
			$('#login_result').html('Успешный вход!');	//меняем на подходящий текст
			
			$('#send_password').toggle();	//прячем кнопку отправки пароля
			$('#send_password').off();	//открепляем текущий обработчик событий (ведь больше спрашивать пароль не нужно!)
			
			$("input:password").attr({'disabled':'true'});	//отключаем поле ввода пароля
			
			last_attempt.css({'background':'green'});	//красим текущий блок в истории попыток в зеленый (находится в нижней части экрана)
			last_attempt = last_attempt.prev();	//переходим к следующему блоку попытки
			
			$('#how_to_open_hint_tip').wrapInner('<strike></strike>');	//перечеркиваем текст с подсказкой, как узнать правильный пароль
			
			//показываем интересный факт, высоту документа
			$('#did_you_know').html('<span style="color:blue;font-weight:bold;">А вы знали?</span> Высота этой веб-страницы составляет <b>' + $(document).innerHeight() + '</b> пикселей!');
		} else {	//если пароль не угадали
			$('#login_result').css({'color':'red'});	//красим текст результата попытки в красный
			$('#login_result').html('Провал. Неверный пароль!');	//ставим нужный текст
			
			last_attempt.css({'background':'red'});	//красим текущий блок истории попыток в красный (располагается в нижней части экрана)
			last_attempt = last_attempt.prev();	//переходим к след. блоку
		}
		if ($('#login_result').css('display') == 'none') $('#login_result').slideToggle();	//раскрываем (показываем) блок с результатом проверки пароля (если первый раз ввели)
	});
  </script>

</body>

</html>
