<!--
  ПИ18-2 Степанов И.
  Вариант №12

  ПЕРЕДЕЛАТЬ С ПОМОЩЬЮ JQUERY (ЧАСТЬ 1)

  12. (а) TABLE из одного столбца, содержащих кнопки
  (б)В элементе SELECT указать число ячеек таблицы.
  (в)При нажатии на одну кнопку другие становятся недоступными
  Значения кнопок заданы в массиве

  Ссылки:
  Мой хостинг:  https://stepigor.ru/university/webdev/t-3.html
  JSFiddle:     https://jsfiddle.net/stepigor/hcbyo9f2/
-->

<!--
  ВТОРАЯ ЧАСТЬ РАБОТЫ (ВЫБРАННЫЕ ФУНКЦИИ JQUERY), ФАЙЛ t-3p2:

  Ссылки:
  Мой хостинг:  https://stepigor.ru/university/webdev/t-3p2.html
  JSFiddle:     https://jsfiddle.net/stepigor/mk4hf0qw/

!-->


<html lang="ru" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>t-3</title>
</head>

<body style="background:lightgrey;color:black;text-align:center;font-size:24px;">

  <!-- Таблица с пояснениями задания и подписью работы -->

  <table style="margin:0 auto;border:3px solid blue;">
    <tr>
      <td style="text-align:center;font-size:24px;">
        <b>ПИ18-2 Степанов И.</b><br>
        Вариант №12 <br><br>

        <br>
        <span style="color:red;">Переделано с помощью JQUERY</span>
        <br><br>

        (а) TABLE из одного столбца, содержащих кнопки<br>
        (б) В элементе SELECT указать число ячеек таблицы.<br>
        (в) При нажатии на одну кнопку другие становятся недоступными<br>
        Значения кнопок заданы в массиве<br><br>

        Ссылки:<br>
        <a href="https://stepigor.ru/university/webdev/t-3.html" target="_blank">https://stepigor.ru/university/webdev/t-3.html</a><br>
        <a href="https://jsfiddle.net/stepigor/hcbyo9f2/" target="_blank">https://jsfiddle.net/stepigor/hcbyo9f2/</a>


        <br><br>
        <span style="color:red;">ВТОРАЯ ЧАСТЬ РАБОТЫ (ВЫБРАННЫЕ ФУНКЦИИ JQUERY):</span>
        <br><br>

        <a href="https://stepigor.ru/university/webdev/t-3p2.html" target="_blank">https://stepigor.ru/university/webdev/t-3p2.html</a><br>
        <a href="https://jsfiddle.net/stepigor/mk4hf0qw/" target="_blank">https://jsfiddle.net/stepigor/mk4hf0qw/</a>

        <br>
      </td>
    </tr>
  </table>

  <!-- Таблица, которая содержит две формы. Использую таблицу, так как хочу выравнить формы в одну линию -->

  <table style="margin:0 auto;padding:25px;font-size:24px;border:3px solid blue;margin-top:15px;">
    <tr>
      <td style="text-align:center;vertical-align:top;padding:25px;">
        <b>ПЕРВАЯ ФОРМА:</b>
        <form name="form1">
          <!-- здесь JS кодом добавим опции из массива -->
          <!-- Пользователь может указывать количество кнопок с помощью данного ЭУ (select) -->
          <select id="select_el" style="font-size:24px;margin-top:15px;">

          </select>
        </form>
      </td>
      <!-- Второй столбец таблицы со второй формой -->
      <td style="text-align:center;border-left:3px solid blue;vertical-align:top;padding:25px;">
        <b>ВТОРАЯ ФОРМА:</b>
          <!-- здесь будет таблица, которая контролируется из первой формы -->
          <!-- данная форма с будущей таблицей (table появится путем использования JS) будет содержать указанное пользователем количество кнопок в одном столбце (построчно) -->
          <form id="form2">

          </form>
      </td>
    </tr>
  </table>


  <!-- Скрипт помещаю в конце, так как нужно, чтобы все элементы дерева загрузились !-->
  <!-- Подключаем JQuery (файл с моего хостинга) !-->

  <script src="https://difres.ru/js/jquery.js"></script>

  <script>
    //добавляем опции в select
    var options_elements = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]; //кол-во строк в таблице (содержимое select)
    var button_values = ['А', 'Б', 'В', 'Г', 'Д', 'Е', 'Ё', 'Ж', 'З', 'И']; //значения кнопок

    options_elements.forEach((item, i) => {
        $('#select_el').append('<option>'+item+'</option>');  //добавляем из массива опции в элемент select (пользователь выбирает, сколько кнопок должно отобразиться во второй форме)
    });


    //при выборе кол-ва строк пользователем генерируем таблицу во второй форме
    $('#select_el').bind('change', function(){
      //очищаем вторую форму
      $('#form2').html('');

      //добавляем туда таблицу - только если пользователь выбрал количество кнопок > 0 (ведь нет смысла создавать таблицу, которая будет пустой)
      if (this.value != 0) $('#form2').html('<table style="border:3px solid orange;width:100%;" id="put_buttons_here"></table>');
      for (k=0; k<this.value; k++){ // под this подразумевается сам элемент select с id select_el, так как мы находимся в addEventListener данного элемента
        //добавляем в новую таблицу по очереди строки с button с привязкой к функции по клику block_other() - отключение остальных кнопок (это нужно сделать по условию задания), значения кнопок берем из массива
        $('#put_buttons_here').append('<tr><td style="border:3px solid orange;text-align:center;"><input type="button" style="font-size:24px;width:100%;" onclick="block_other(this.id)" id="but_'+(k+1)+'" value="'+button_values[k]+'"></td></tr>');
      }
    });


    //сделать неактивными другие кнопки кроме нажатой
    function block_other(id){
      for (k=1; k <= $('#select_el').val(); k++){
        if (id != 'but_' + k) {$('#but_' + k).attr('disabled', 'disabled');} else {$('#but_' + k).removeAttr('disabled');}
      }
    }
  </script>


</body>
</html>
